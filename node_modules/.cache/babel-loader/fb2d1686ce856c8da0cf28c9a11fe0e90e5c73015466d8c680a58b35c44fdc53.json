{"ast":null,"code":"import _regeneratorRuntime from\"/home/sagnikg/AAO Website/Exquisite Corpse/corpse/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/home/sagnikg/AAO Website/Exquisite Corpse/corpse/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _classCallCheck from\"/home/sagnikg/AAO Website/Exquisite Corpse/corpse/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";import _createClass from\"/home/sagnikg/AAO Website/Exquisite Corpse/corpse/node_modules/@babel/runtime/helpers/esm/createClass.js\";import _assertThisInitialized from\"/home/sagnikg/AAO Website/Exquisite Corpse/corpse/node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js\";import _inherits from\"/home/sagnikg/AAO Website/Exquisite Corpse/corpse/node_modules/@babel/runtime/helpers/esm/inherits.js\";import _createSuper from\"/home/sagnikg/AAO Website/Exquisite Corpse/corpse/node_modules/@babel/runtime/helpers/esm/createSuper.js\";import React,{Component}from'react';import{socket}from'../socket';import p5 from'p5';import{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var EndSketch=/*#__PURE__*/function(_Component){_inherits(EndSketch,_Component);var _super=_createSuper(EndSketch);function EndSketch(props){var _this;_classCallCheck(this,EndSketch);_this=_super.call(this,props);_this.state={username:_this.props.username,baseStrings:_this.props.baseStrings,scale:1};_this.myRef=/*#__PURE__*/React.createRef();_this.makeImage=_this.makeImage.bind(_assertThisInitialized(_this));return _this;}_createClass(EndSketch,[{key:\"componentDidMount\",value:function componentDidMount(){var _this2=this;console.log(this.state.baseStrings);if(this.sketch){this.sketch.remove();}this.sketch=new p5(function(p){var imageLoader=function imageLoader(url){return new Promise(function(resolve,reject){p.loadImage(url,function(result){resolve(result);},function(){reject(Error(\"Image not found\"));});});};p.setup=/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var lngth,i,img,sc;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:lngth=Object.keys(_this2.state.baseStrings).length;//this.state.baseStrings.length;\np.pixelDensity(1);_this2.canvas=p.createCanvas(500,425*lngth+75).parent(_this2.myRef.current);p.background('#ffffff');i=0;case 5:if(!(i<lngth)){_context.next=13;break;}_context.next=8;return imageLoader(_this2.state.baseStrings[i]);case 8:img=_context.sent;p.image(img,0,425*i);case 10:i++;_context.next=5;break;case 13:sc=Math.min(window.innerWidth/p.width,window.innerHeight/p.height);// sc = Math.round(sc*100);\n_this2.setState({scale:sc});_this2.makeImage();case 16:case\"end\":return _context.stop();}},_callee);}));p.draw=function(){p.noLoop();};});}},{key:\"makeImage\",value:function makeImage(){if(this.canvas){var fullCanvasData=this.canvas.elt.toDataURL();this.setState({imgSrc:fullCanvasData});}this.sketch.remove();}},{key:\"render\",value:function render(){return/*#__PURE__*/_jsx(\"div\",{style:{background:\"var(--bg1)\",display:\"flex\",height:\"100%\",//'100vh',\nwidth:'100vw',overflowX:\"hidden\",alignItems:\"center\",justifyContent:\"center\"},children:/*#__PURE__*/_jsx(\"div\",{style:{display:\"flex\",flexDirection:\"row\",flex:1,alignItems:\"center\",justifyContent:\"center\",position:\"relative\",transform:\"scale(\"+this.state.scale+\")\"},ref:this.myRef,children:this.state.imgSrc?/*#__PURE__*/_jsx(\"img\",{src:this.state.imgSrc}):/*#__PURE__*/_jsx(_Fragment,{})})});}}]);return EndSketch;}(Component);export default EndSketch;","map":{"version":3,"names":["React","Component","socket","p5","jsx","_jsx","Fragment","_Fragment","EndSketch","_Component","_inherits","_super","_createSuper","props","_this","_classCallCheck","call","state","username","baseStrings","scale","myRef","createRef","makeImage","bind","_assertThisInitialized","_createClass","key","value","componentDidMount","_this2","console","log","sketch","remove","p","imageLoader","url","Promise","resolve","reject","loadImage","result","Error","setup","_asyncToGenerator","_regeneratorRuntime","mark","_callee","lngth","i","img","sc","wrap","_callee$","_context","prev","next","Object","keys","length","pixelDensity","canvas","createCanvas","parent","current","background","sent","image","Math","min","window","innerWidth","width","innerHeight","height","setState","stop","draw","noLoop","fullCanvasData","elt","toDataURL","imgSrc","render","style","display","overflowX","alignItems","justifyContent","children","flexDirection","flex","position","transform","ref","src"],"sources":["/home/sagnikg/AAO Website/Exquisite Corpse/corpse/src/pages/endSketch.js"],"sourcesContent":["import React, {Component} from 'react';\nimport { socket } from '../socket';\nimport p5 from 'p5';\n\nclass EndSketch extends Component{\n    constructor(props)\n    {\n        super(props);\n        this.state = {\n            username: this.props.username,\n            baseStrings: this.props.baseStrings,\n            scale: 1\n        }\n        this.myRef = React.createRef();\n        this.makeImage = this.makeImage.bind(this);\n    }\n\n    componentDidMount()\n    {\n        console.log(this.state.baseStrings);\n        if(this.sketch)\n        {\n            this.sketch.remove();\n        }\n\n        this.sketch = new p5( p  => {\n            const imageLoader = (url) => {\n                return new Promise( (resolve, reject) => {\n                    p.loadImage(url, \n                        (result) => {\n                            resolve(result);        \n                        }, \n                        () => {\n                            reject(Error(\"Image not found\"))\n                        });\n\n                });\n            };\n            \n            p.setup = async () => {\n                let lngth = Object.keys(this.state.baseStrings).length;//this.state.baseStrings.length;\n                p.pixelDensity(1);\n                this.canvas = p.createCanvas(500,425*lngth + 75).parent(this.myRef.current);\n                p.background('#ffffff');\n                for(let i=0;i<lngth;i++)\n                {\n                    let img  = await imageLoader(this.state.baseStrings[i]);\n                    p.image(img,0,425*i);\n                }\n                let sc = Math.min( window.innerWidth/p.width , window.innerHeight/p.height );\n                // sc = Math.round(sc*100);\n                this.setState({\n                    scale: sc\n                });\n                this.makeImage();\n            };\n\n            p.draw = () => {\n                p.noLoop();\n            }\n        });\n    }\n\n    makeImage()\n    {\n        if(this.canvas)\n        {\n            let fullCanvasData = (this.canvas.elt.toDataURL());\n            this.setState({\n                imgSrc: fullCanvasData\n            });\n        }\n        this.sketch.remove();\n    }\n    \n    render()\n    {\n        return (\n            <div style={{\n                background: \"var(--bg1)\",\n                display: \"flex\",\n                height: \"100%\",//'100vh',\n                width: '100vw',\n                overflowX: \"hidden\",\n                alignItems: \"center\",\n                justifyContent: \"center\",\n            }}>\n            <div \n            style={{\n                display: \"flex\",\n                flexDirection: \"row\",\n                flex: 1,\n                alignItems: \"center\",\n                justifyContent: \"center\",\n                position: \"relative\",\n                transform: \"scale(\" + this.state.scale +\")\"\n            }}\n            ref={this.myRef}>\n                {this.state.imgSrc?(\n                    <img src={this.state.imgSrc}/>\n                    ):(<></>)}\n            </div>\n        </div>\n        );\n    }\n}\n\nexport default EndSketch;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}