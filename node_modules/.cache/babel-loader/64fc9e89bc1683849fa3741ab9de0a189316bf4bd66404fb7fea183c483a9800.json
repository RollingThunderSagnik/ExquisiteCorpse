{"ast":null,"code":"var _jsxFileName = \"/home/sagnikg/AAO Website/Exquisite Corpse/corpse/src/pages/endSketch.js\";\nimport React, { Component } from 'react';\nimport { socket } from '../socket';\nimport p5 from 'p5';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nclass EndSketch extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      username: this.props.username,\n      baseStrings: this.props.baseStrings,\n      scale: 1\n    };\n    this.myRef = /*#__PURE__*/React.createRef();\n    this.makeImage = this.makeImage.bind(this);\n  }\n  componentDidMount() {\n    console.log(this.state.baseStrings);\n    if (this.sketch) {\n      this.sketch.remove();\n    }\n    this.sketch = new p5(p => {\n      const imageLoader = url => {\n        return new Promise((resolve, reject) => {\n          p.loadImage(url, result => {\n            resolve(result);\n          }, () => {\n            reject(Error(\"Image not found\"));\n          });\n        });\n      };\n      p.setup = async () => {\n        let lngth = Object.keys(this.state.baseStrings).length; //this.state.baseStrings.length;\n        p.pixelDensity(1);\n        this.canvas = p.createCanvas(500, 425 * lngth + 75).parent(this.myRef.current);\n        p.background('#ffffff');\n        for (let i = 0; i < lngth; i++) {\n          let img = await imageLoader(this.state.baseStrings[i]);\n          p.image(img, 0, 425 * i);\n        }\n        let sc = Math.min(window.innerWidth / p.width, window.innerHeight / p.height);\n        // sc = Math.round(sc*100);\n        this.setState({\n          scale: sc\n        });\n        this.makeImage();\n      };\n      p.draw = () => {\n        p.noLoop();\n      };\n    });\n  }\n  makeImage() {\n    if (this.canvas) {\n      let fullCanvasData = this.canvas.elt.toDataURL();\n      this.setState({\n        imgSrc: fullCanvasData\n      });\n    }\n    this.sketch.remove();\n  }\n  render() {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        background: \"var(--bg1)\",\n        display: \"flex\",\n        height: \"100%\",\n        //'100vh',\n        width: '100vw',\n        overflowX: \"hidden\",\n        alignItems: \"center\",\n        justifyContent: \"center\"\n      },\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          display: \"flex\",\n          flexDirection: \"row\",\n          flex: 1,\n          alignItems: \"center\",\n          justifyContent: \"center\",\n          position: \"relative\",\n          transform: \"scale(\" + this.state.scale + \")\"\n        },\n        ref: this.myRef,\n        children: this.state.imgSrc ? /*#__PURE__*/_jsxDEV(\"img\", {\n          src: this.state.imgSrc\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 100,\n          columnNumber: 21\n        }, this) : /*#__PURE__*/_jsxDEV(_Fragment, {}, void 0, false)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 88,\n        columnNumber: 13\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 13\n    }, this);\n  }\n}\nexport default EndSketch;","map":{"version":3,"names":["React","Component","socket","p5","jsxDEV","_jsxDEV","Fragment","_Fragment","EndSketch","constructor","props","state","username","baseStrings","scale","myRef","createRef","makeImage","bind","componentDidMount","console","log","sketch","remove","p","imageLoader","url","Promise","resolve","reject","loadImage","result","Error","setup","lngth","Object","keys","length","pixelDensity","canvas","createCanvas","parent","current","background","i","img","image","sc","Math","min","window","innerWidth","width","innerHeight","height","setState","draw","noLoop","fullCanvasData","elt","toDataURL","imgSrc","render","style","display","overflowX","alignItems","justifyContent","children","flexDirection","flex","position","transform","ref","src","fileName","_jsxFileName","lineNumber","columnNumber"],"sources":["/home/sagnikg/AAO Website/Exquisite Corpse/corpse/src/pages/endSketch.js"],"sourcesContent":["import React, {Component} from 'react';\nimport { socket } from '../socket';\nimport p5 from 'p5';\n\nclass EndSketch extends Component{\n    constructor(props)\n    {\n        super(props);\n        this.state = {\n            username: this.props.username,\n            baseStrings: this.props.baseStrings,\n            scale: 1\n        }\n        this.myRef = React.createRef();\n        this.makeImage = this.makeImage.bind(this);\n    }\n\n    componentDidMount()\n    {\n        console.log(this.state.baseStrings);\n        if(this.sketch)\n        {\n            this.sketch.remove();\n        }\n\n        this.sketch = new p5( p  => {\n            const imageLoader = (url) => {\n                return new Promise( (resolve, reject) => {\n                    p.loadImage(url, \n                        (result) => {\n                            resolve(result);        \n                        }, \n                        () => {\n                            reject(Error(\"Image not found\"))\n                        });\n\n                });\n            };\n            \n            p.setup = async () => {\n                let lngth = Object.keys(this.state.baseStrings).length;//this.state.baseStrings.length;\n                p.pixelDensity(1);\n                this.canvas = p.createCanvas(500,425*lngth + 75).parent(this.myRef.current);\n                p.background('#ffffff');\n                for(let i=0;i<lngth;i++)\n                {\n                    let img  = await imageLoader(this.state.baseStrings[i]);\n                    p.image(img,0,425*i);\n                }\n                let sc = Math.min( window.innerWidth/p.width , window.innerHeight/p.height );\n                // sc = Math.round(sc*100);\n                this.setState({\n                    scale: sc\n                });\n                this.makeImage();\n            };\n\n            p.draw = () => {\n                p.noLoop();\n            }\n        });\n    }\n\n    makeImage()\n    {\n        if(this.canvas)\n        {\n            let fullCanvasData = (this.canvas.elt.toDataURL());\n            this.setState({\n                imgSrc: fullCanvasData\n            });\n        }\n        this.sketch.remove();\n    }\n    \n    render()\n    {\n        return (\n            <div style={{\n                background: \"var(--bg1)\",\n                display: \"flex\",\n                height: \"100%\",//'100vh',\n                width: '100vw',\n                overflowX: \"hidden\",\n                alignItems: \"center\",\n                justifyContent: \"center\",\n            }}>\n            <div \n            style={{\n                display: \"flex\",\n                flexDirection: \"row\",\n                flex: 1,\n                alignItems: \"center\",\n                justifyContent: \"center\",\n                position: \"relative\",\n                transform: \"scale(\" + this.state.scale +\")\"\n            }}\n            ref={this.myRef}>\n                {this.state.imgSrc?(\n                    <img src={this.state.imgSrc}/>\n                    ):(<></>)}\n            </div>\n        </div>\n        );\n    }\n}\n\nexport default EndSketch;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}