{"ast":null,"code":"import _regeneratorRuntime from\"/home/sagnikg/AAO Website/Exquisite Corpse/corpse/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/home/sagnikg/AAO Website/Exquisite Corpse/corpse/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _classCallCheck from\"/home/sagnikg/AAO Website/Exquisite Corpse/corpse/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";import _createClass from\"/home/sagnikg/AAO Website/Exquisite Corpse/corpse/node_modules/@babel/runtime/helpers/esm/createClass.js\";import _assertThisInitialized from\"/home/sagnikg/AAO Website/Exquisite Corpse/corpse/node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js\";import _inherits from\"/home/sagnikg/AAO Website/Exquisite Corpse/corpse/node_modules/@babel/runtime/helpers/esm/inherits.js\";import _createSuper from\"/home/sagnikg/AAO Website/Exquisite Corpse/corpse/node_modules/@babel/runtime/helpers/esm/createSuper.js\";import React,{Component}from'react';import{socket}from'../socket';import p5 from'p5';import{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var EndSketch=/*#__PURE__*/function(_Component){_inherits(EndSketch,_Component);var _super=_createSuper(EndSketch);function EndSketch(props){var _this;_classCallCheck(this,EndSketch);_this=_super.call(this,props);_this.state={username:_this.props.username,baseStrings:_this.props.baseStrings,scale:1};_this.myRef=/*#__PURE__*/React.createRef();_this.makeImage=_this.makeImage.bind(_assertThisInitialized(_this));return _this;}_createClass(EndSketch,[{key:\"componentDidMount\",value:function componentDidMount(){var _this2=this;console.log(this.state.baseStrings);if(this.sketch){this.sketch.remove();}this.sketch=new p5(function(p){var imageLoader=function imageLoader(url){return new Promise(function(resolve,reject){p.loadImage(url,function(result){resolve(result);},function(){reject(Error(\"Image not found\"));});});};p.setup=/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var lngth,i,img,sc;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:lngth=Object.keys(_this2.state.baseStrings).length;//this.state.baseStrings.length;\np.pixelDensity(1);_this2.canvas=p.createCanvas(500,425*lngth+75).parent(_this2.myRef.current);p.background('#ffffff');i=0;case 5:if(!(i<lngth)){_context.next=13;break;}_context.next=8;return imageLoader(_this2.state.baseStrings[i]);case 8:img=_context.sent;p.image(img,0,425*i);case 10:i++;_context.next=5;break;case 13:sc=Math.min(window.innerWidth/p.width,window.innerHeight/p.height);// sc = Math.round(sc*100);\n_this2.setState({scale:sc});_this2.makeImage();case 16:case\"end\":return _context.stop();}},_callee);}));p.draw=function(){p.noLoop();};});}},{key:\"makeImage\",value:function makeImage(){if(this.canvas){var fullCanvasData=this.canvas.elt.toDataURL();this.setState({imgSrc:fullCanvasData});}this.sketch.remove();}},{key:\"render\",value:function render(){return/*#__PURE__*/_jsx(\"div\",{style:{background:\"var(--bg1)\",display:\"flex\",height:\"100%\",//'100vh',\nwidth:'100vw',overflowX:\"hidden\",alignItems:\"center\",justifyContent:\"center\"},children:/*#__PURE__*/_jsx(\"div\",{style:{display:\"flex\",flexDirection:\"row\",flex:1,alignItems:\"center\",justifyContent:\"center\",position:\"relative\",transform:\"scale(\"+this.state.scale+\")\"},ref:this.myRef,children:this.state.imgSrc?/*#__PURE__*/_jsx(\"img\",{src:this.state.imgSrc}):/*#__PURE__*/_jsx(_Fragment,{})})});}}]);return EndSketch;}(Component);export default EndSketch;","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}